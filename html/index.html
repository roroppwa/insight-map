<!DOCTYPE html>
<html lang="ko">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-T99ZFKEC1G"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-T99ZFKEC1G');
</script>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë¡œë¡œë½œ ì¸ì‚¬ì´íŠ¸ ëŒ€ì‹œë³´ë“œ</title>
<style>
:root{
  --bg:#f8fafc;
  --card:#ffffff;
  --border:#e5e7eb;
  --muted:#64748b;
  --muted2:#94a3b8;
  --up:#b91c1c;
  --up-bg:#fee2e2;
  --down:#1d4ed8;
  --down-bg:#dbeafe;
  --accent:#f97316;
  --accent2:#22c55e;
  --shadow-soft:0 10px 30px rgba(15,23,42,0.08);
  --shadow-sub:0 6px 18px rgba(15,23,42,0.06);
}

*{
  box-sizing:border-box;
}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:radial-gradient(circle at top,#e0f2fe,#f8fafc,#fefce8);
  color:#0f172a;
}

/* ìƒë‹¨ í—¤ë” */
header{
  padding:16px 20px 10px 20px;
  border-bottom:1px solid rgba(148,163,184,0.25);
  backdrop-filter:blur(18px);
  position:sticky;
  top:0;
  z-index:10;
  background:linear-gradient(to bottom,rgba(248,250,252,0.92),rgba(248,250,252,0.98));
}
header .top-row{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:10px;
}
header .title-block{
  display:flex;
  flex-direction:column;
  gap:4px;
}
header h1{
  margin:0;
  font-size:20px;
  font-weight:800;
  letter-spacing:-0.03em;
  display:flex;
  align-items:center;
  gap:7px;
}
header h1 .emoji{
  font-size:22px;
}
header .subtitle{
  font-size:12px;
  color:var(--muted);
}
header .badge-row{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  margin-top:4px;
}
.badge{
  font-size:11px;
  padding:2px 7px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,0.6);
  background:rgba(248,250,252,0.85);
  color:#334155;
}
.badge.highlight{
  background:linear-gradient(135deg,#fee2e2,#fef9c3);
  border-color:#fecaca;
  color:#7f1d1d;
  font-weight:600;
}
header .right-info{
  text-align:right;
  font-size:11px;
  color:var(--muted2);
}
header .right-info .line{
  margin-bottom:2px;
}
header .session-chip{
  display:inline-flex;
  align-items:center;
  gap:4px;
  padding:3px 8px;
  border-radius:999px;
  background:rgba(15,23,42,0.06);
  color:#0f172a;
  font-size:11px;
  border:1px solid rgba(148,163,184,0.35);
}
header .session-chip-dot{
  width:7px;
  height:7px;
  border-radius:999px;
  background:radial-gradient(circle at 30% 30%,#22c55e,#15803d);
  box-shadow:0 0 0 4px rgba(34,197,94,0.25);
}
header .date-line{
  margin-top:4px;
}

/* ìƒë‹¨ ë©”ì¸ íƒ­ (ì¥ì „ / ì¥ì¤‘ / ì¥í›„) */
.main-tabs{
  margin-top:12px;
  display:flex;
  gap:6px;
  border-radius:999px;
  padding:4px;
  background:rgba(248,250,252,0.9);
  border:1px solid rgba(226,232,240,0.9);
  box-shadow:0 6px 18px rgba(148,163,184,0.25);
}
.main-tab-btn{
  flex:1;
  font-size:13px;
  padding:6px 8px;
  border-radius:999px;
  border:none;
  background:transparent;
  color:#475569;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:6px;
  transition:all 0.18s ease-out;
}
.main-tab-btn .pill{
  font-size:11px;
  padding:1px 6px;
  border-radius:999px;
  background:#e5e7eb;
  color:#4b5563;
}
.main-tab-btn.active{
  background:linear-gradient(135deg,#f97316,#ef4444);
  color:#f9fafb;
  font-weight:700;
  box-shadow:0 8px 22px rgba(248,113,113,0.65);
}
.main-tab-btn.active .pill{
  background:rgba(248,250,252,0.2);
  color:#fefce8;
}

/* ë ˆì´ì•„ì›ƒ ì»¨í…Œì´ë„ˆ */
#page-container{
  max-width:1200px;
  margin:0 auto;
  padding:12px 18px 50px 18px;
}

/* ì•ˆë‚´ ì¹´ë“œ (ì™¼ìª½ ìš”ì•½ + ì˜¤ë¥¸ìª½ ì„¤ëª…) */
.info-grid{
  margin-top:14px;
  display:grid;
  grid-template-columns:2.1fr 1.2fr;
  gap:14px;
}
.info-card{
  background:linear-gradient(135deg,rgba(248,250,252,0.98),rgba(239,246,255,0.98));
  border-radius:18px;
  padding:12px 14px 12px 14px;
  border:1px solid rgba(209,213,219,0.9);
  box-shadow:var(--shadow-sub);
  position:relative;
  overflow:hidden;
}
.info-card::before{
  content:"";
  position:absolute;
  inset:-40%;
  background:radial-gradient(circle at 0 0,rgba(251,191,36,0.18),transparent 55%),
             radial-gradient(circle at 100% 20%,rgba(248,113,113,0.18),transparent 55%);
  opacity:0.8;
  pointer-events:none;
}

/* ì¢Œì¸¡: ì˜¤ëŠ˜ ìš”ì•½ */
.info-main-title{
  font-size:14px;
  font-weight:800;
  margin-bottom:4px;
  display:flex;
  align-items:center;
  gap:6px;
}
.info-main-title span.small{
  font-size:12px;
  font-weight:600;
  color:#f97316;
}
.info-main-text{
  font-size:12px;
  color:#475569;
  margin-bottom:8px;
}
.info-summary-grid{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin-bottom:4px;
}
.info-summary-pill{
  flex:1 1 90px;
  min-width:90px;
  font-size:11px;
  padding:6px 8px;
  border-radius:12px;
  background:rgba(248,250,252,0.95);
  border:1px solid rgba(226,232,240,0.9);
  display:flex;
  flex-direction:column;
  gap:3px;
}
.info-summary-pill-label{
  color:#6b7280;
}
.info-summary-pill-value{
  font-weight:700;
  color:#111827;
}
.info-summary-pill-sub{
  font-size:11px;
  color:#9ca3af;
}

/* ìš°ì¸¡: ì‚¬ìš© ë°©ë²• / ë§í¬ ì˜ì—­ */
.info-side-card{
  background:linear-gradient(135deg,rgba(15,23,42,0.96),rgba(30,64,175,0.96));
  border-radius:18px;
  padding:12px 14px;
  color:#e5e7eb;
  box-shadow:0 10px 30px rgba(15,23,42,0.5);
  border:1px solid rgba(148,163,184,0.8);
  position:relative;
  overflow:hidden;
}
.info-side-card::before{
  content:"";
  position:absolute;
  inset:-40%;
  background:radial-gradient(circle at 10% 0,rgba(56,189,248,0.35),transparent 55%),
             radial-gradient(circle at 100% 100%,rgba(248,113,113,0.32),transparent 55%);
  opacity:0.85;
  pointer-events:none;
}
.info-side-inner{
  position:relative;
  z-index:1;
}
.info-side-title{
  font-size:13px;
  font-weight:700;
  margin-bottom:4px;
  display:flex;
  align-items:center;
  gap:6px;
}
.info-side-title span.badge{
  background:rgba(248,250,252,0.12);
  border-color:rgba(148,163,184,0.7);
  color:#e5e7eb;
}
.info-side-text{
  font-size:11px;
  color:#e5e7eb;
  opacity:0.95;
  margin-bottom:6px;
}
.info-side-list{
  font-size:11px;
  margin:0;
  padding-left:16px;
  color:#e5e7eb;
}
.info-side-list li{
  margin-bottom:2px;
}
.info-side-link{
  margin-top:8px;
  font-size:11px;
}
.info-side-link a{
  color:#fef9c3;
  text-decoration:none;
  border-bottom:1px dashed rgba(250,250,210,0.7);
}

/* ë©”ì¸ ì¹´ë“œ (iframe ë‹´ëŠ” ì¹´ë“œ) */
.main-card{
  background:var(--card);
  border-radius:14px;
  border:1px solid var(--border);
  box-shadow:0 2px 8px rgba(15,23,42,0.04);
  padding:14px 14px 10px 14px;
}

/* ê°€ìš´ë° ë¼ë²¨ ì˜ì—­ (ì •ë ¬: ì™¼ìª½) */
.sub-tabs{
  display:flex;
  justify-content:flex-start;
  margin-bottom:8px;
}
.sub-tabs-single{
}
.sub-tab-label{
  display:inline-flex;
  align-items:center;
  gap:4px;
  padding:4px 10px;
  border-radius:999px;
  background:rgba(248,250,252,0.95);
  border:1px solid #e5e7eb;
  box-shadow:0 2px 4px rgba(15,23,42,0.04);
  font-size:11px;
  color:#6b7280;
}
.sub-tab-label .label{
  font-weight:600;
  color:#f97316;
}
.sub-tab-label .divider{
  color:#cbd5f5;
}
.sub-tab-label .desc{
  font-size:11px;
  color:#6b7280;
}

/* iframe */
.iframe-wrap{
  border-radius:12px;
  overflow:hidden;
  border:1px solid #e5e7eb;
  background:#f1f5f9;
}
iframe{
  width:100%;
  height:700px;
  border:none;
  background:#f8fafc;
}

/* í•˜ë‹¨ ì£¼ì„/ì•ˆë‚´ */
.footer-note{
  margin-top:12px;
  font-size:11px;
  color:#94a3b8;
}
.footer-note strong{
  color:#64748b;
}

/* ë°˜ì‘í˜• */
@media (max-width:900px){
  #page-container{
    padding:10px 12px 40px 12px;
  }
  header{
    padding:12px 12px 8px 12px;
  }
  header .top-row{
    flex-direction:column;
    align-items:flex-start;
    gap:6px;
  }
  iframe{
    height:620px;
  }
  .info-grid{
    grid-template-columns:1fr;
  }
}
</style>
</head>
<body>
<header>
  <div class="top-row">
    <div class="title-block">
      <h1>
        <span class="emoji">ğŸ“Š</span>
        <span>ë¡œë¡œë½œ ì¸ì‚¬ì´íŠ¸ ëŒ€ì‹œë³´ë“œ</span>
      </h1>
      <div class="subtitle">êµ­ë‚´ í…Œë§ˆÂ·ì¢…ëª© íë¦„ì„ ì¥ì „ Â· ì¥ì¤‘ Â· ì¥í›„ ì‹œì ìœ¼ë¡œ ë‚˜ëˆ  ë³´ëŠ” ëŒ€ì‹œë³´ë“œì…ë‹ˆë‹¤.</div>
      <div class="badge-row">
        <span class="badge highlight">ì¥ì „/ì¥ì¤‘/ì¥í›„ ë°ì´í„° ìë™ ì—…ë°ì´íŠ¸</span>
        <span class="badge">ì¥ì „: ì „ì¼ ì¢…ê°€ ê¸°ì¤€ í…Œë§ˆ ìŠ¤ëƒ…ìƒ·</span>
        <span class="badge">ì¥ì¤‘: ì‹¤ì‹œê°„ ë³€ë™Â·ìˆ˜ê¸‰</span>
        <span class="badge">ì¥í›„: ë§ˆê° ê¸°ì¤€ í…Œë§ˆ ë§µ ì •ë¦¬</span>
      </div>

      <!-- ìƒë‹¨ ë©”ì¸ íƒ­: ì¥ì „ / ì¥ì¤‘ / ì¥í›„ -->
      <div class="main-tabs">
        <button type="button" class="main-tab-btn active" id="main-tab-preopen">
          <span>ì¥ì „ ê¸°ì¤€</span>
          <span class="pill">ì „ì¼ ì¢…ê°€ ë°ì´í„°</span>
        </button>
        <button type="button" class="main-tab-btn" id="main-tab-intraday">
          <span>ì¥ì¤‘ ê¸°ì¤€</span>
          <span class="pill">ì‹¤ì‹œê°„ ë°ì´í„°</span>
        </button>
        <button type="button" class="main-tab-btn" id="main-tab-postclose">
          <span>ì¥í›„ ê¸°ì¤€</span>
          <span class="pill">ë§ˆê° ë°ì´í„°</span>
        </button>
      </div>
    </div>
    <div class="right-info">
      <div class="line">
        <span class="session-chip">
          <span class="session-chip-dot"></span>
          <span id="session-info">ì„¸ì…˜ ì •ë³´ë¥¼ ê³„ì‚° ì¤‘...</span>
        </span>
      </div>
      <div class="line date-line" id="now-info">-</div>
      <div class="line">â€» ì°¸ê³ ìš© ëŒ€ì‹œë³´ë“œ (ë°ì´í„°Â·ë ˆì´ì•„ì›ƒ ìˆ˜ì‹œ ìˆ˜ì • ì˜ˆì •)</div>
    </div>
  </div>
</header>

<div id="page-container">
  <div class="info-grid">
    <div class="info-card">
      <div class="info-main-title">
        ì˜¤ëŠ˜ ì‹œì¥ì„ í•œ ë²ˆì—
        <span class="small">ì¥ì „ Â· ì¥ì¤‘ Â· ì¥í›„ Â· ìˆ˜ê¸‰ê¹Œì§€</span>
      </div>
      <div class="info-main-text">
        ì¥ì „ì—ëŠ” ì „ì¼ ì¢…ê°€ ê¸°ì¤€ í…Œë§ˆ ìŠ¤ëƒ…ìƒ·ì„, ì¥ì¤‘ì—ëŠ” ì‹¤ì‹œê°„ ë³€ë™ê³¼ ìˆ˜ê¸‰, ì¥í›„ì—ëŠ” ë§ˆê° ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ í…Œë§ˆ ë§µì„ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
      </div>
      <div class="info-summary-grid">
        <div class="info-summary-pill">
          <div class="info-summary-pill-label">ì¥ì „</div>
          <div class="info-summary-pill-value">ì „ì¼ ì¢…ê°€ ê¸°ì¤€ í…Œë§ˆ ìš”ì•½</div>
          <div class="info-summary-pill-sub">ìˆ˜ìµë¥ /ìˆ˜ê¸‰/52ì£¼ ìœ„ì¹˜ë¡œ ì²« í™”ë©´ ê°€ì´ë“œ</div>
        </div>
        <div class="info-summary-pill">
          <div class="info-summary-pill-label">ì¥ì¤‘</div>
          <div class="info-summary-pill-value">ì‹¤ì‹œê°„ íë¦„</div>
          <div class="info-summary-pill-sub">í…Œë§ˆÂ·ì¢…ëª© ë³€ë™ì„± / ì²´ê²° ê°•ë„ ë“±</div>
        </div>
        <div class="info-summary-pill">
          <div class="info-summary-pill-label">ì¥í›„</div>
          <div class="info-summary-pill-value">ë§ˆê° ê¸°ì¤€ í…Œë§ˆ ë§µ</div>
          <div class="info-summary-pill-sub">í…Œë§ˆ/ì¢…ëª© ì „ì²´ ì—´ì§€ë„ ë° ìƒìœ„ ë¦¬ìŠ¤íŠ¸</div>
        </div>
      </div>
    </div>
    <div class="info-side-card">
      <div class="info-side-inner">
        <div class="info-side-title">
          ëŒ€ì‹œë³´ë“œ ì‚¬ìš© ê°€ì´ë“œ
          <span class="badge">ì•ˆë‚´</span>
        </div>
        <div class="info-side-text">
          ìƒë‹¨ íƒ­ì—ì„œ ì¥ì „/ì¥ì¤‘/ì¥í›„ ê¸°ì¤€ì„ ì„ íƒí•˜ë©´, ì•„ë˜ ì¹´ë“œì—ì„œ í•´ë‹¹ ì‹œì ì— ë§ëŠ” í…Œë§ˆÂ·ì¢…ëª© ëŒ€ì‹œë³´ë“œë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
        </div>
        <ul class="info-side-list">
          <li>ì¥ì „: ì „ì¼ ì¢…ê°€ ê¸°ì¤€ìœ¼ë¡œ í…Œë§ˆ/ì¢…ëª© ìŠ¤ëƒ…ìƒ· í™•ì¸</li>
          <li>ì¥ì¤‘: ì‹¤ì‹œê°„ ê¸°ì¤€ ë³€ë™Â·ìˆ˜ê¸‰ ì§€í‘œ í™•ì¸</li>
          <li>ì¥í›„: ë§ˆê° ë°ì´í„° ê¸°ë°˜ í…Œë§ˆ ë§µê³¼ ìƒìœ„ í…Œë§ˆ/ì¢…ëª© ì •ë¦¬</li>
        </ul>
        <div class="info-side-link">
          GitHub Pages ë²„ì „:
          <a href="https://roroppwa.github.io/insight-map/" target="_blank" rel="noopener">roroppwa.github.io/insight-map</a>
        </div>
      </div>
    </div>
  </div>

  <div class="main-card" style="margin-top:16px;">
    <!-- ê°€ìš´ë° ì‘ì€ ë¼ë²¨ (ì¹´ë“œ ì™¼ìª½ ì •ë ¬) -->
    <div class="sub-tabs sub-tabs-single">
      <div class="sub-tab-label" id="view-label">
        <span class="label">ì¥ì „ ê¸°ì¤€</span>
        <span class="divider">Â·</span>
        <span class="desc">ì „ì¼ ì¢…ê°€ ê¸°ì¤€ í…Œë§ˆ ìŠ¤ëƒ…ìƒ·</span>
      </div>
    </div>

    <div class="iframe-wrap">
      <iframe id="dashboard-frame" src="about:blank"></iframe>
    </div>
    <div class="footer-note">
      <strong>ì£¼ì˜:</strong> ë³¸ ëŒ€ì‹œë³´ë“œëŠ” ì°¸ê³ ìš©ìœ¼ë¡œ êµ¬ì„±ëœ ë°ì´í„° í™”ë©´ì…ë‹ˆë‹¤. ë°ì´í„° ì§€ì—°, ì§‘ê³„ ë¡œì§ ë³€ê²½, ì‹œì„¸Â·ìˆ˜ê¸‰ ì§€í‘œ ì°¨ì´ ë“±ì´ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë©°,
      íˆ¬ì íŒë‹¨ì˜ ì±…ì„ì€ ì „ì ìœ¼ë¡œ ì‚¬ìš©ìì—ê²Œ ìˆìŠµë‹ˆë‹¤.
    </div>
  </div>
</div>

<script>
  const VER = Date.now();

  function detectSession() {
    const now = new Date();
    const hour = now.getHours();
    const minute = now.getMinutes();
    const hm = hour * 100 + minute;

    if (hm < 900) return "preopen";   // 09:00 ì´ì „ â†’ ì¥ì „
    if (hm <= 1530) return "intraday"; // 09:00 ~ 15:30 â†’ ì¥ì¤‘
    return "postclose";                // 15:30 ì´í›„ â†’ ì¥í›„
  }

  function formatNow() {
    const now = new Date();
    const y = now.getFullYear();
    const m = String(now.getMonth() + 1).padStart(2, "0");
    const d = String(now.getDate()).padStart(2, "0");
    const hh = String(now.getHours()).padStart(2, "0");
    const mm = String(now.getMinutes()).padStart(2, "0");
    return `${y}-${m}-${d} ${hh}:${mm}`;
  }

  function setSessionText(session) {
    const el = document.getElementById("session-info");
    if (!el) return;
    if (session === "preopen") {
      el.textContent = "í˜„ì¬ ì¥ì „ ê¸°ì¤€ í™”ë©´ì„ ë³´ê³  ìˆìŠµë‹ˆë‹¤.";
    } else if (session === "intraday") {
      el.textContent = "í˜„ì¬ ì¥ì¤‘ ê¸°ì¤€(ì‹¤ì‹œê°„ ê¸°ì¤€) í™”ë©´ì„ ë³´ê³  ìˆìŠµë‹ˆë‹¤.";
    } else {
      el.textContent = "í˜„ì¬ ì¥í›„(ë§ˆê° ê¸°ì¤€) í™”ë©´ì„ ë³´ê³  ìˆìŠµë‹ˆë‹¤.";
    }
  }

  // iframe + ë¼ë²¨ ì—…ë°ì´íŠ¸
  function setActiveTab(target) {
    const frame = document.getElementById("dashboard-frame");
    const label = document.getElementById("view-label");

    if (target === "preopen") {
      frame.src = "preopen/preopen.html?v=" + VER;
      if (label) {
        label.innerHTML =
          '<span class="label">ì¥ì „ ê¸°ì¤€</span>' +
          '<span class="divider">Â·</span>' +
          '<span class="desc">ì „ì¼ ì¢…ê°€ ê¸°ì¤€ í…Œë§ˆ ìŠ¤ëƒ…ìƒ·</span>';
      }
    } else if (target === "intraday") {
      frame.src = "intraday/intraday.html?v=" + VER;
      if (label) {
        label.innerHTML =
          '<span class="label">ì¥ì¤‘ ê¸°ì¤€</span>' +
          '<span class="divider">Â·</span>' +
          '<span class="desc">ì‹¤ì‹œê°„ ë³€ë™/ìˆ˜ê¸‰</span>';
      }
    } else {
      frame.src = "postclose/postclose.html?v=" + VER;
      if (label) {
        label.innerHTML =
          '<span class="label">ì¥í›„ ê¸°ì¤€</span>' +
          '<span class="divider">Â·</span>' +
          '<span class="desc">ë§ˆê° ê¸°ì¤€ í…Œë§ˆ ë§µ</span>';
      }
    }
    setSessionText(target);
  }

  // ìƒë‹¨ ë©”ì¸ íƒ­ ì´ˆê¸°í™”
  function initMainTabs(initial) {
    const mainPre   = document.getElementById("main-tab-preopen");
    const mainIntra = document.getElementById("main-tab-intraday");
    const mainPost  = document.getElementById("main-tab-postclose");

    function setMainActive(key) {
      mainPre.classList.remove("active");
      mainIntra.classList.remove("active");
      mainPost.classList.remove("active");

      if (key === "preopen") {
        mainPre.classList.add("active");
      } else if (key === "intraday") {
        mainIntra.classList.add("active");
      } else {
        mainPost.classList.add("active");
      }
    }

    if (initial) {
      setMainActive(initial);
    }

    mainPre.addEventListener("click", () => {
      setMainActive("preopen");
      setActiveTab("preopen");
    });
    mainIntra.addEventListener("click", () => {
      setMainActive("intraday");
      setActiveTab("intraday");
    });
    mainPost.addEventListener("click", () => {
      setMainActive("postclose");
      setActiveTab("postclose");
    });
  }

  function init() {
    const nowInfo = document.getElementById("now-info");
    if (nowInfo) {
      nowInfo.textContent = `í˜ì´ì§€ ê¸°ì¤€ ì‹œê°: ${formatNow()}`;
    }

    const params = new URLSearchParams(window.location.search);
    const qTab = params.get("tab");
    const session = (qTab === "preopen" || qTab === "intraday" || qTab === "postclose")
      ? qTab
      : detectSession();

    initMainTabs(session);
    setActiveTab(session);
  }

  window.addEventListener("DOMContentLoaded", init);
</script>

</body>
</html>
